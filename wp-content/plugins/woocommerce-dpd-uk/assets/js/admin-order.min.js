jQuery(document).on("click",".dpd_uk-button-add-package",function(){var b=jQuery(this).attr("data-count");if(typeof b!="undefined"){var c=parseInt(jQuery(this).attr("data-count_additional"))+1;jQuery(this).attr("data-count_additional",c);var a=jQuery("#dpd_uk_additional_package_template_"+b).html();a=a.split("_additional_key_").join(c);a=a.split("_count_").join(b);jQuery(this).parent().before(a)}var d=jQuery(this).attr("data-id");if(typeof d!="undefined"){var c=parseInt(jQuery(this).attr("data-count_additional"))+1;jQuery(this).attr("data-count_additional",c);var a=jQuery("#dpd_uk_additional_package_template_"+d).html();a=a.split("_additional_key_").join(c);a=a.split("_count_").join(b);jQuery(this).parent().before(a)}});jQuery(document).on("click",".dpd_uk-button-delete-package",function(){if(jQuery(this).attr("disabled")=="disabled"){return}jQuery(this).parent().remove()});jQuery(document).on("click",".dpd_uk-button-delete-created",function(b){var a=jQuery(this).attr("data-count");if(typeof a!="undefined"){if(jQuery(this).attr("disabled")=="disabled"){return}jQuery(".dpd_uk-button").attr("disabled","disabled");jQuery(this).parent().find(".spinner").css({visibility:"visible"});var a=jQuery(this).attr("data-count");dpd_uk_ajax("delete_created_package",a)}var d=jQuery(this).attr("data-id");if(typeof d!="undefined"){b.stopImmediatePropagation();b.preventDefault();var d=fs_id(this);var c="cancel";fs_ajax(this,d,c)}});jQuery(document).on("click",".dpd_uk-button-create",function(b){var a=jQuery(this).attr("data-count");if(typeof a!="undefined"){if(jQuery(this).attr("disabled")=="disabled"){return}jQuery(".dpd_uk-button").attr("disabled","disabled");jQuery(this).parent().find(".spinner").css({visibility:"visible"});dpd_uk_ajax("create_package",a)}var d=jQuery(this).attr("data-id");if(typeof d!="undefined"){b.stopImmediatePropagation();b.preventDefault();var d=fs_id(this);var c="send";fs_ajax(this,d,c)}});jQuery(document).on("click",".dpd_uk-button-save",function(b){var a=jQuery(this).attr("data-count");if(typeof a!="undefined"){if(jQuery(this).attr("disabled")=="disabled"){return}jQuery(".dpd_uk-button").attr("disabled","disabled");jQuery(this).parent().find(".spinner").css({visibility:"visible"});var a=jQuery(this).attr("data-count");dpd_uk_ajax("save_package",a)}var d=jQuery(this).attr("data-id");if(typeof d!="undefined"){b.stopImmediatePropagation();b.preventDefault();var d=fs_id(this);var c="save";fs_ajax(this,d,c)}});jQuery(document).on("click",".dpd_uk-button-delete",function(){if(jQuery(this).attr("disabled")=="disabled"){return}jQuery(".dpd_uk-button").attr("disabled","disabled");jQuery(this).parent().find(".spinner").css({visibility:"visible"});var a=jQuery(this).attr("data-count");dpd_uk_ajax("delete_package",a)});jQuery(document).on("click",".dpd_uk-button-print",function(){if(jQuery(this).attr("disabled")=="disabled"){return}jQuery(".dpd_uk-button").attr("disabled","disabled");jQuery(this).parent().find(".spinner").css({visibility:"visible"});var b=jQuery(this).attr("data-count");var a={action:"wpdesk_dpd_uk",dpd_uk_action:"print_label",security:jQuery("#dpd_uk_ajax_nonce").val(),post_id:jQuery("input[name=post_id]").val(),shipment_id:jQuery(this).attr("data-shipment-id"),key:jQuery("#dpd_uk_"+b+"_key").val()};jQuery.ajax({url:dpd_uk_ajax_object.ajax_url,data:a,method:"POST",dataType:"JSON",success:function(c){jQuery("#print_message_"+c.post.shipment_id).html(c.message)},error:function(e,c,d){alert(e.status+": "+d)},complete:function(){jQuery(".dpd_uk-button").removeAttr("disabled","disabled");jQuery(".dpd_uk-spinner").css({visibility:"hidden"})}})});jQuery(document).on("click",".dpd_uk-button-label",function(){var c=jQuery(this).attr("data-shipment-id");var a=dpd_uk_ajax_object.ajax_url+"?action=wpdesk_dpd_uk&dpd_uk_action=get_label&security="+jQuery("#dpd_uk_ajax_nonce").val();a=a+"&shipment_id="+c;a=a+"&post_id="+jQuery("input[name=post_id]").val();var b=jQuery(this).attr("data-count");a=a+"&key="+jQuery("#dpd_uk_"+b+"_key").val(),window.open(a,"_blank")});jQuery(document).on("change",".dpd_uk-product",function(){});jQuery(document).on("change",".dpd_uk-declared_value",function(){if(jQuery(this).is(":checked")){jQuery(this).closest(".dpd_uk-package").find(".dpd_uk-declared_value-value").show()}else{jQuery(this).closest(".dpd_uk-package").find(".dpd_uk-declared_value-value").hide()}});jQuery(document).on("change",".dpd_uk-liability",function(){if(jQuery(this).is(":checked")){jQuery(this).closest(".dpd_uk-package").find(".dpd_uk-liability-value").show()}else{jQuery(this).closest(".dpd_uk-package").find(".dpd_uk-liability-value").hide()}});function dpd_uk_init(){jQuery(".dpd_uk-product").each(function(){jQuery(this).change()});jQuery(".dpd_uk-disabled").each(function(){jQuery(this).prop("disabled",true)});jQuery(".dpd_uk-declared_value").each(function(){jQuery(this).change()});jQuery(".dpd_uk-liability").each(function(){jQuery(this).change()})}dpd_uk_init();