/** Wonderplugin Video Embed
 * Copyright 2018 Magic Hills Pty Ltd All Rights Reserved
 * Website: http://www.wonderplugin.com
 * Version 1.7 
 */
(function($){tinymce.PluginManager.add("wpve_mce_button",function(editor,url){editor.addButton("wpve_mce_button",{text:" Video",title:"Wonder Video Embed",icon:true,image:url+"/logo-72.png",onclick:function(){wpve_options_form(editor)}})});function get_url_arams(href){var result={};if(href.indexOf("?")<0)return result;var params=href.substring(href.indexOf("?")+1).split("&");for(var i=0;i<params.length;i++){var value=params[i].split("=");if(value&&value.length==2&&value[0].toLowerCase()!="v")result[value[0].toLowerCase()]=
value[1]}return result}function escape_html(s){return s.replace(/"/g,'\\"').replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function double_escape_html(s){return escape_html(s).replace(/&/g,"&amp;")}function wpve_options_form(editor){$(".wpve-mce-dialog").remove();var pluginbaseurl="";var helpurl="";var lightboxinstalled=false;if(WONDERPLUGIN_VIDEO_MCE_EDITOR){if(WONDERPLUGIN_VIDEO_MCE_EDITOR.pluginurl&&WONDERPLUGIN_VIDEO_MCE_EDITOR.pluginurl.length>0)pluginbaseurl=
WONDERPLUGIN_VIDEO_MCE_EDITOR.pluginurl;if(WONDERPLUGIN_VIDEO_MCE_EDITOR.helpurl&&WONDERPLUGIN_VIDEO_MCE_EDITOR.helpurl.length>0)helpurl=WONDERPLUGIN_VIDEO_MCE_EDITOR.helpurl;if(WONDERPLUGIN_VIDEO_MCE_EDITOR.lightboxinstalled)lightboxinstalled=WONDERPLUGIN_VIDEO_MCE_EDITOR.lightboxinstalled}var videotype="iframe";var iframe="";var mp4="";var webm="";var poster="";var videowidth=600;var videoheight=400;var keepaspectratio=1;var autoplay=0;var loop=0;var videocss="position:relative;display:block;background-color:#000;overflow:hidden;max-width:100%;margin:0 auto;";
var playbutton=pluginbaseurl+"engine/playvideo-64-64-0.png";var lightbox=0;var lightboxsize=1;var lightboxwidth=960;var lightboxheight=540;var lightboxtitle="";var lightboxgroup="";var lightboxshownavigation=0;var autoopen=0;var autoopendelay=0;var autoclose=0;var showimage="";var lightboxoptions="";var form='<div class="wpve-tab-container wpve-mce-dialog" title="Wonder Video Embed">';form+='<div class="wpve-tab-label wpve-tab-label-selected" data-contentclass="wpve-tab-content1">Video</div>';form+=
'<div class="wpve-tab-label" data-contentclass="wpve-tab-content2">Lightbox</div>';form+='<div class="wpve-tab-label" data-contentclass="wpve-tab-content3">Options</div>';form+='<div class="wpve-tab-help"><a href="'+helpurl+'" target="_blank">Help Document</a></div>';form+='<section class="wpve-tab-content1 wpve-tab-content wpve-tab-content-selected" >';form+='<p class="wpve-error-msg"></p>';form+='<p><label class="wpve-tab-label-primary"><input type="radio" class="wpve-videotype-input" name="wpve-videotype" value="iframe" '+
(videotype=="iframe"?"checked":"")+" /> Enter YouTube, Vimeo, Wistia or iFrame Video URL:</label></p>";form+='<div class="wpve-subtab-container wpve-video-iframe-container" style="display:block;">';form+='<input class="wpve-iframe-url widefat" type="text" name="wpve-iframe" value="'+iframe+'" />';form+="</div>";form+='<p><label class="wpve-tab-label-primary"><input type="radio" class="wpve-videotype-input" name="wpve-videotype" value="mp4" '+(videotype=="mp4"?"checked":"")+" /> MP4/WebM Video</label></p>";
form+='<div class="wpve-subtab-container wpve-video-mp4-container" style="display:block;">';form+="<p>";form+="<label>MP4 Video URL:</label><br>";form+='<input type="text" class="wpve-mp4-url wpve-regular-text" name="wpve-mp4" value="'+mp4+'" />';form+='<input type="button" class="wpve-select-file wpve-select-mp4 button" data-textfield="wpve-mp4-url" data-texttype="video" value="Select an MP4 file" />';form+="</p>";form+="<p>";form+="<label>WebM Video URL (For Firefox HTML5 Player):</label><br>";
form+='<input type="text" class="wpve-webm-url wpve-regular-text" name="wpve-webm" value="'+webm+'" />';form+='<input type="button" class="wpve-select-file wpve-select-webm button" data-textfield="wpve-webm-url" data-texttype="video" value="Select a WebM file" />';form+="</p>";form+="<p>";form+="<label>HTML5 Video Poster Image URL:</label><br>";form+='<input type="text" class="wpve-poster-url wpve-regular-text" name="wpve-poster" value="'+poster+'" />';form+='<input type="button" class="wpve-select-file wpve-select-poster button" data-textfield="wpve-poster-url" data-texttype="image" value="Select an image file" />';
form+="</p>";form+="</div>";form+="</section>";form+='<section class="wpve-tab-content2 wpve-tab-content" >';form+="<p"+(lightboxinstalled?"":' style="color:#ff0000;"')+'>* To play in lightbox, <a href="https://www.wonderplugin.com/wordpress-lightbox/?product=videoembed" target="_blank">Wonder Lightbox</a> must be installed and activated.</p>';form+='<p><label class="wpve-tab-label-primary"><input type="checkbox" class="checkbox" name="wpve-lightbox" '+(lightbox?"checked":"")+' value="on"/> Play in Lightbox Popup</label></p>';
form+='<div class="wpve-subtab-container wpve-play-lightbox-container" style="display:block;">';form+='<p><label><input type="checkbox" class="checkbox" name="wpve-lightboxsize" '+(lightboxsize?"checked":"")+' value="on" /> Set Lightbox size: </label><input type="number" name="wpve-lightboxwidth" value="'+lightboxwidth+'" class="small-text" /> / <input type="number" name="wpve-lightboxheight" value="'+lightboxheight+'" class="small-text" /></p>';form+="<p>";form+="<label>Display Image / Thumbnail URL:</label><br>";
form+='<input type="text" class="wpve-showimage-url wpve-regular-text" name="wpve-showimage" value="'+showimage+'" />';form+='<input type="button" class="wpve-select-file wpve-select-showimage button" data-textfield="wpve-showimage-url" data-texttype="image" value="Select an image file" />';form+="</p>";form+='<label>Title:<input type="text" name="wpve-lightboxtitle" value="'+lightboxtitle+'" class="widefat" /></label>';form+='<p><label><input type="checkbox" class="checkbox" name="wpve-autoopen" '+
(autoopen?"checked":"")+' value="on" /> Auto popup on page load in milliseconds: </label><input type="number" name="wpve-autoopendelay" value="'+autoopendelay+'" class="small-text" /></p>';form+='<p><label><input type="checkbox" class="checkbox" name="wpve-autoclose" '+(autoclose?"checked":"")+' value="on" /> Auto close on video end (YouTube, Vimeo and MP4/WebM)</label></p>';form+="<p>";form+='<label>Add to group:<input type="text" name="wpve-lightboxgroup" value="'+lightboxgroup+'" class="medium-text" /></label>';
form+='&nbsp;&nbsp;<label><input type="checkbox" class="checkbox" name="wpve-lightboxshownavigation" '+(lightboxshownavigation?"checked":"")+' value="on" /> Show thumbnail navigation</label>';form+="</p>";form+='<p><label>Lightbox Advanced Options:</label><textarea name="wpve-lightboxoptions" class="widefat" rows="4">'+lightboxoptions+"</textarea></p>";form+="</div>";form+="</section>";form+='<section class="wpve-tab-content3 wpve-tab-content" >';form+='<p><label>Width / Height (px) : </label><input type="number" name="wpve-videowidth" value="'+
videowidth+'" class="small-text" /> / <input type="number" name="wpve-videoheight" value="'+videoheight+'" class="small-text" /></p>';form+='<p><label><input type="checkbox" class="checkbox" name="wpve-keepaspectratio" '+(keepaspectratio?"checked":"")+' value="on" /> Keep Aspect Ratio</label>';form+='&nbsp;&nbsp;&nbsp;&nbsp;<label><input type="checkbox" class="checkbox" name="wpve-autoplay" '+(autoplay?"checked":"")+' value="on" /> Autoplay</label>';form+='&nbsp;&nbsp;&nbsp;&nbsp;<label><input type="checkbox" class="checkbox" name="wpve-loop" '+
(loop?"checked":"")+' value="on" /> Loop play</label></p>';form+="<p>* Autoplay does not work on mobile and tablets.</p>";form+="<p><label>Video CSS:</label></td>";form+='<input type="text" class="wpve-videocss widefat" name="wpve-videocss" value="'+videocss+'" /></p>';form+="<p>";form+="<label>Play Button URL:</label><br>";form+='<input type="text" class="wpve-playbutton-url wpve-regular-text" name="wpve-playbutton" value="'+playbutton+'" />';form+='<input type="button" class="wpve-select-file wpve-select-playbutton button" data-textfield="wpve-playbutton-url" data-texttype="image" value="Select an image file" />';
if(pluginbaseurl&&pluginbaseurl.length>0){form+='OR <select class="wpve-select-playbutton-preloaded">';form+='<option value=""></option>';form+='<option value="'+pluginbaseurl+'engine/playvideo-64-64-0.png">White Button</option>';form+='<option value="'+pluginbaseurl+'engine/playvideo-64-64-1.png">Red Button</option>';form+='<option value="'+pluginbaseurl+'engine/playvideo-64-64-2.png">Blue Button</option>';form+="</select>"}form+="</p>";form+="</section>";form+='<p class="wpve-submit-container"><input type="button" class="wpve-mce-submit button-primary" value="Insert Video" name="wpve-submit" /></p>';
form+="</div>";$(form).appendTo("body").hide();$(".wpve-mce-dialog").dialog({dialogClass:"wp-dialog",autoOpen:true,height:"auto",width:800,modal:true});if($(".wpve-mce-dialog").dialog("instance")&&$(".wpve-mce-dialog").dialog("instance").uiDialog)if(WONDERPLUGIN_VIDEO_MCE_EDITOR&&WONDERPLUGIN_VIDEO_MCE_EDITOR.zindex)$(".wpve-mce-dialog").dialog("instance").uiDialog.css("z-index",WONDERPLUGIN_VIDEO_MCE_EDITOR.zindex);$(".wpve-mce-submit").click(function(){var content="[wonderplugin_video";var videotype=
$('input[name="wpve-videotype"]:checked').val();if(videotype=="iframe"){var iframe=$.trim($('input[name="wpve-iframe"]').val());if(iframe.length<=0){$(".wpve-error-msg").text("Please enter a YouTube, Vimeo, Wistia or iFrame video URL").show();return}content+=' iframe="'+iframe+'"'}else{content+=' videotype="mp4"';var mp4=$.trim($('input[name="wpve-mp4"]').val());if(mp4.length<=0){$(".wpve-error-msg").text("Please enter an MP4 video URL").show();return}content+=' mp4="'+mp4+'"';var webm=$.trim($('input[name="wpve-webm"]').val());
if(webm.length>0)content+=' webm="'+webm+'"';else content+=' webm=""';var poster=$.trim($('input[name="wpve-poster"]').val());if(poster.length>0)content+=' poster="'+poster+'"';else content+=' poster=""'}if($('input[name="wpve-lightbox"]').is(":checked"))content+=" lightbox=1";else content+=" lightbox=0";if($('input[name="wpve-lightboxsize"]').is(":checked"))content+=" lightboxsize=1";else content+=" lightboxsize=0";content+=" lightboxwidth="+$('input[name="wpve-lightboxwidth"]').val()+" lightboxheight="+
$('input[name="wpve-lightboxheight"]').val();if($('input[name="wpve-autoopen"]').is(":checked"))content+=" autoopen=1";else content+=" autoopen=0";content+=" autoopendelay="+$('input[name="wpve-autoopendelay"]').val();if($('input[name="wpve-autoclose"]').is(":checked"))content+=" autoclose=1";else content+=" autoclose=0";var lightboxtitle=$.trim($('input[name="wpve-lightboxtitle"]').val());if(lightboxtitle.length>0)content+=' lightboxtitle="'+double_escape_html(lightboxtitle)+'"';else content+=' lightboxtitle=""';
var lightboxgroup=$.trim($('input[name="wpve-lightboxgroup"]').val());if(lightboxgroup.length>0)content+=' lightboxgroup="'+lightboxgroup+'"';else content+=' lightboxgroup=""';if($('input[name="wpve-lightboxshownavigation"]').is(":checked"))content+=" lightboxshownavigation=1";else content+=" lightboxshownavigation=0";var showimage=$.trim($('input[name="wpve-showimage"]').val());if(showimage.length>0)content+=' showimage="'+showimage+'"';else content+=' showimage=""';var lightboxoptions=$.trim($('textarea[name="wpve-lightboxoptions"]').val());
if(lightboxoptions.length>0)content+=' lightboxoptions="'+double_escape_html(lightboxoptions)+'"';else content+=' lightboxoptions=""';content+=" videowidth="+$('input[name="wpve-videowidth"]').val();content+=" videoheight="+$('input[name="wpve-videoheight"]').val();if($('input[name="wpve-keepaspectratio"]').is(":checked"))content+=" keepaspectratio=1";else content+=" keepaspectratio=0";if($('input[name="wpve-autoplay"]').is(":checked"))content+=" autoplay=1";else content+=" autoplay=0";if($('input[name="wpve-loop"]').is(":checked"))content+=
" loop=1";else content+=" loop=0";var videocss=$.trim($('input[name="wpve-videocss"]').val()).replace(/"/g,'\\"');if(videocss.length>0)content+=' videocss="'+videocss+'"';else content+=' videocss=""';var playbutton=$.trim($('input[name="wpve-playbutton"]').val());if(playbutton.length>0)content+=' playbutton="'+playbutton+'"';else content+=' playbutton=""';content+="]";editor.insertContent(content);$(".wpve-mce-dialog").dialog("close")})}})(jQuery);
